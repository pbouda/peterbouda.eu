<!DOCTYPE html>
<!--
    Miniport by HTML5 UP
    html5up.net | @n33co
    Free for personal and commercial use under the CCA 3.0 license (html5up.net/license)
-->
<html>
  <head>
    <title>Peter Bouda - Working on Libre AI Projects</title>
    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <meta name="description" content="" />
    <meta
      name="keywords"
      content="AI, LLM, Natural Language Processing, Python, Software Development, Consultant"
    />

    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png" />
    <link rel="icon" type="image/png" href="/favicon-32x32.png" sizes="32x32" />
    <link rel="icon" type="image/png" href="/favicon-16x16.png" sizes="16x16" />
    <link rel="manifest" href="/manifest.json" />
    <link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5" />
    <meta name="theme-color" content="#ffffff" />

    <!--[if lte IE 8]><script src="css/ie/html5shiv.js"></script><![endif]-->
    <script src="/theme/js/jquery.min.js"></script>
    <script src="/theme/js/jquery.scrolly.min.js"></script>
    <script src="/theme/js/skel.min.js"></script>
    <script src="/theme/js/init.js"></script>
    <link
      href="http://www.peterbouda.eu/feeds/all.atom.xml"
      type="application/atom+xml"
      rel="alternate"
      title="Peter Bouda Atom Feed"
    />
     <link
      href="http://www.peterbouda.eu/feeds/all.rss"
      type="application/rss+xml"
      rel="alternate"
      title="Peter Bouda RSS Feed"
    />

    <link rel="stylesheet" href="/theme/css/pygment.css" />

    <noscript>
      <link rel="stylesheet" href="/theme/css/skel.css" />
      <link rel="stylesheet" href="/theme/css/style.css" />
      <link rel="stylesheet" href="/theme/css/style-desktop.css" />
    </noscript>

    <script type="application/ld+json">
      {
        "@context": "http://schema.org",
        "@type": "Person",
        "name": "Peter Bouda",
        "url": "https://www.peterbouda.eu",
        "jobTitle": "Working on Libre AI Projects",
        "alumniOf": "LMU Munich",
        "gender": "male",
        "image": "https://www.peterbouda.eu/theme/images/pic00.jpg",
        "sameAs": ["https://github.com/pbouda"]
      }
    </script>

    <!--[if lte IE 8
      ]><link rel="stylesheet" href="/theme/css/ie/v8.css"
    /><![endif]-->
    <!--[if lte IE 9
      ]><link rel="stylesheet" href="/theme/css/ie/v9.css"
    /><![endif]-->
  </head>
  <body>
		<!-- Nav -->
			<nav id="nav">
				<ul class="container">
					<li><a href="/#top">Home</a></li>
					<!--<li><a href="/#work">Work</a></li>-->
					<li><a href="/#portfolio">Portfolio</a></li>
					<li><a href="/#feed">Blog</a></li>
					<li><a href="/#contact">Contact</a></li>
				</ul>
			</nav> <section id="content" class="body">
  <article class="h-entry">
    <header>
      <h1 class="entry-title e-title">
        <a
          class="p-name u-url"
          href="http://www.peterbouda.eu/update-fur-die-opengl-renderschleife-in-pyqt.html"
          rel="bookmark"
          title="Permalink to Update für die OpenGL-Renderschleife in PyQt"
          >Update für die OpenGL-Renderschleife in&nbsp;PyQt</a
        >
      </h1>
    </header>

    <div class="entry-content e-content container">
      <div class="row">
        <div class="8u">
          <div class="article-top-image">
            <img src="/images/pyqt_opengl_raymarching.png" />
          </div>
 <footer class="post-info">
    <p>
        Published by <a href="http://www.peterbouda.eu" class="p-author">Peter Bouda</a> at <b><time class="dt-published" datetime="2015-01-30 11:00:00+00:00">Fri 30 January 2015</time></b>
        in <b><a class="p-category" href="/category/graphics.html">Graphics</a></b>.
    </p>
    

        
</footer><!-- /.post-info -->          <p>Ich versuche gerade mich in das Thema Raytraching bzw. Raymarching einzuarbeiten. Dabei bin wieder auf mein Qt-OpenGL-Programmgerüst zurückgekommen, dass ich in <a class="reference external" href="http://www.peterbouda.eu/revisiting-pyqt-and-opengl.html">einem meiner letzten Artikel</a> beschrieben habe. Leider hat das Skript nicht auf Anhieb auf einem neuen Rechner funktioniert, was ich auf unterschiedliche Implementierungen der OpenGL-Bibliothek in Qt oder gar den Grafiktreiber zurückführe. Bestimme von mir verwendete Befehle erzeugten Fehlermeldungen, u.a. konnte ich das OpenGL-Viereck für das Fraktal nicht per <tt class="docutils literal">QL_QUADS</tt> zeichnen. Ich habe also das Programmgerüst etwas angepasst und auf reine OpenGL <span class="caps">ES</span> 2.0 Befehle reduziert. Statt einem Viereck zeichne ich jetzt zwei Dreiecke, die ich per <em>Vertex Array</em> übergebe. Ich benutze dafür die Methode <tt class="docutils literal">glDrawElements()</tt>, der ich die Indizes auf die einzelnen Dreickspunkte im <em>Vertex Array</em> übergebe. Die <tt class="docutils literal">render</tt>-Schleife sieht jetzt in etwa folgendermaßen&nbsp;aus:</p>
<div class="highlight"><pre><span></span><span class="n">gl</span><span class="o">.</span><span class="n">glViewport</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">width</span><span class="p">(),</span> <span class="bp">self</span><span class="o">.</span><span class="n">height</span><span class="p">())</span>
<span class="n">gl</span><span class="o">.</span><span class="n">glClear</span><span class="p">(</span><span class="n">gl</span><span class="o">.</span><span class="n">GL_COLOR_BUFFER_BIT</span><span class="p">)</span>

<span class="bp">self</span><span class="o">.</span><span class="n">program</span><span class="o">.</span><span class="n">bind</span><span class="p">()</span>

<span class="n">vertices</span> <span class="o">=</span> <span class="n">array</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="s2">&quot;f&quot;</span><span class="p">,</span> <span class="p">[</span>
     <span class="mi">1</span><span class="p">,</span>  <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span>
    <span class="o">-</span><span class="mi">1</span><span class="p">,</span>  <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span>
    <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span>
     <span class="mi">1</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span>
<span class="p">])</span>

<span class="n">indices</span> <span class="o">=</span> <span class="n">array</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="s2">&quot;B&quot;</span><span class="p">,</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">])</span>

<span class="n">gl</span><span class="o">.</span><span class="n">glEnableVertexAttribArray</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">vAttr</span><span class="p">)</span>
<span class="n">gl</span><span class="o">.</span><span class="n">glVertexAttribPointer</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">vAttr</span><span class="p">,</span>
    <span class="mi">3</span><span class="p">,</span>
    <span class="n">gl</span><span class="o">.</span><span class="n">GL_FLOAT</span><span class="p">,</span>
    <span class="n">gl</span><span class="o">.</span><span class="n">GL_FALSE</span><span class="p">,</span>
    <span class="mi">0</span><span class="p">,</span>
    <span class="n">vertices</span><span class="p">)</span>
<span class="n">gl</span><span class="o">.</span><span class="n">glDrawElements</span><span class="p">(</span><span class="n">gl</span><span class="o">.</span><span class="n">GL_TRIANGLES</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="n">gl</span><span class="o">.</span><span class="n">GL_UNSIGNED_BYTE</span><span class="p">,</span> <span class="n">indices</span><span class="p">)</span>
<span class="n">gl</span><span class="o">.</span><span class="n">glDisableVertexAttribArray</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">vAttr</span><span class="p">)</span>

<span class="bp">self</span><span class="o">.</span><span class="n">program</span><span class="o">.</span><span class="n">release</span><span class="p">()</span>
</pre></div>
<p>Diese Gerüst eignet sich damit auch hervorragend für erste Raymarching-Experimente, da letztendlich wiederum nur ein simples Viereck mit den Eckpunkten <tt class="docutils literal"><span class="pre">[-1,</span> <span class="pre">-1]</span></tt> und <tt class="docutils literal">[1, 1]</tt> gezeichnet wird. In dieses hinein lassen sich dann per Shader Fraktale oder eben Raytracing-Objekte zeichen. Allgemein scheint PyQt eine schöne Umgebung für Shader-Experimente zu sein, wie ich immer wieder festestellen muss. Mit dem Programmgerüst kann man schnell die Shader sowie deren Input und Output modifizieren. Der Screenshot oben basiert auf den Shadern des <a class="reference external" href="http://www.iquilezles.org/www/material/isystem1k4k/isystem1k4k.htm">4k-Intro-Frameworks von iquilezles.org</a>, eine fantastische Website zum Thema Grafikprogrammierung und <a class="reference external" href="http://www.iquilezles.org/www/articles/distfunctions/distfunctions.htm">interessanten Artikeln zum Thema Raymarching</a>. Hier ist noch der Link zu meinem aktuellen Experiment, das die oben abgebildete Kugel rendert, und das die OpenGL-Renderschleife in Aktion&nbsp;zeigt:</p>
<p><a class="reference external" href="https://github.com/pbouda/stuff/blob/master/opengl/pyqt/raymarching.py">https://github.com/pbouda/stuff/blob/master/opengl/pyqt/raymarching.py</a></p>

          <div id="comments">
			<script src="https://utteranc.es/client.js"
					repo="pbouda/peterbouda.eu"
					issue-term="pathname"
					label="Comment"
					theme="github-light"
					crossorigin="anonymous"
					async>
			</script>
          </div>
        </div>
        <!-- /.entry-content -->

        <div class="4u">
          <article class="box style2">
            <div>
              <img
                style="border-radius:50%; width:80%;"
                src="theme/images/pic00.jpg"
                alt=""
              />
            </div>
            <h3>About me</h3>
            <p>
              My name is Peter Bouda and I am a software developer with more than 20 years of
              professional experience in application development. I help
              you to bring your application to market as quickly as possible.
            </p>
            <!-- <p>
              Join our <a href="http://www.ng-lisbon.com/#trainings">next Angular training</a>
              in Lisbon, October 2-4.
            </p> -->
            <p>
              <a href="/#top">Read about my work</a><br />
              or<br />
              <a href="/#contact">Contact me</a>
            </p>
          </article>
        </div>
      </div>
      <!-- end row -->
    </div>
    <!-- end container -->
  </article>
</section>

 <!-- Contact -->
<div class="wrapper style4" id="contact">
  <article class="container 75%">
    <div class="row">
      <div class="12u">
        <h2>Send me a message and I will get back to you.</h2>
        <ul class="social">
          <li>
            <a href="mailto:pbouda@outlook.com" class="icon fa-envelope-o"
              ><span class="label">Mail</span></a
            >
          </li>
          <li>
            <a href="https://github.com/pbouda" class="icon fa-github"
              ><span class="label">Github</span></a
            >
          </li>
        </ul>
        <br />
        <h2>RSS Feed</h2>
        <ul class="social">
          <li>
            <a href="http://www.peterbouda.eu/feeds/all.rss" class="icon fa-rss"
              ><span class="label">RSS</span></a
            >
          </li>
        </ul>
        <hr />
      </div>
    </div>

    <footer>
      <ul id="copyright">
        <li>&copy; Peter Bouda. All rights reserved.</li>
        <li>Design: <a href="http://html5up.net">HTML5 UP</a></li>
      </ul>
      <div>+351 917403181</div>
    </footer>
  </article>
</div>  </body>
</html>