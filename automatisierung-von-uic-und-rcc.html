<!DOCTYPE html>
<!--
    Miniport by HTML5 UP
    html5up.net | @n33co
    Free for personal and commercial use under the CCA 3.0 license (html5up.net/license)
-->
<html>
  <head>
    <title>Peter Bouda - Natural Language Processing Consultant</title>
    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <meta name="description" content="" />
    <meta
      name="keywords"
      content="Natural Language Processing, Python, Software Development, Consultant"
    />

    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png" />
    <link rel="icon" type="image/png" href="/favicon-32x32.png" sizes="32x32" />
    <link rel="icon" type="image/png" href="/favicon-16x16.png" sizes="16x16" />
    <link rel="manifest" href="/manifest.json" />
    <link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5" />
    <meta name="theme-color" content="#ffffff" />

    <!--[if lte IE 8]><script src="css/ie/html5shiv.js"></script><![endif]-->
    <script src="/theme/js/jquery.min.js"></script>
    <script src="/theme/js/jquery.scrolly.min.js"></script>
    <script src="/theme/js/skel.min.js"></script>
    <script src="/theme/js/init.js"></script>
    <link
      href="http://www.peterbouda.eu/feeds/all.atom.xml"
      type="application/atom+xml"
      rel="alternate"
      title="Peter Bouda Atom Feed"
    />
     <link
      href="http://www.peterbouda.eu/feeds/all.rss"
      type="application/rss+xml"
      rel="alternate"
      title="Peter Bouda RSS Feed"
    />

    <link rel="stylesheet" href="/theme/css/pygment.css" />

    <noscript>
      <link rel="stylesheet" href="/theme/css/skel.css" />
      <link rel="stylesheet" href="/theme/css/style.css" />
      <link rel="stylesheet" href="/theme/css/style-desktop.css" />
    </noscript>

    <script type="application/ld+json">
      {
        "@context": "http://schema.org",
        "@type": "Person",
        "name": "Peter Bouda",
        "url": "https://www.peterbouda.eu",
        "jobTitle": "Natural Language Processing Consultant",
        "alumniOf": "LMU Munich",
        "gender": "male",
        "image": "https://www.peterbouda.eu/theme/images/pic00.jpg",
        "sameAs": ["https://dev.to/pbouda", "https://github.com/pbouda"]
      }
    </script>

    <!--[if lte IE 8
      ]><link rel="stylesheet" href="/theme/css/ie/v8.css"
    /><![endif]-->
    <!--[if lte IE 9
      ]><link rel="stylesheet" href="/theme/css/ie/v9.css"
    /><![endif]-->
  </head>
  <body>
		<!-- Nav -->
			<nav id="nav">
				<ul class="container">
					<li><a href="/#top">Home</a></li>
					<!--<li><a href="/#work">Work</a></li>-->
					<li><a href="/#portfolio">Portfolio</a></li>
					<li><a href="/#feed">Blog</a></li>
					<li><a href="/#contact">Contact</a></li>
				</ul>
			</nav> <section id="content" class="body">
  <article class="h-entry">
    <header>
      <h1 class="entry-title e-title">
        <a
          class="p-name u-url"
          href="http://www.peterbouda.eu/automatisierung-von-uic-und-rcc.html"
          rel="bookmark"
          title="Permalink to Automatisierung von uic und rcc"
          >Automatisierung von uic und&nbsp;rcc</a
        >
      </h1>
    </header>

    <div class="entry-content e-content container">
      <div class="row">
        <div class="8u">
 <footer class="post-info">
    <p>
        Published by <a href="http://www.peterbouda.eu" class="p-author">Peter Bouda</a> at <b><time class="dt-published" datetime="2011-08-09 16:17:00+01:00">Ter 09 Agosto 2011</time></b>
        in <b><a class="p-category" href="/category/python.html">Python</a></b>.
    </p>
    

        
</footer><!-- /.post-info -->          <p>In einem PyQt- oder PySide-Projekt verwaltet man oft ein oder mehrere Ressourcen- und <span class="caps">UI</span>-Dateien. Diese Dateien erstellt man in einem C++-Qt-Projekt innerhalb des Qt Creator mit dem Qt Designer, mit den Kommandozeilen-Utilities <code>uic</code> bzw. <code>rcc</code> werden diese Dateien dann in C++-Code umgewandelt. Der Qt Creator bzw. Projektdatei und <code>qmake</code> nehmen dem Entwickler dabei die meiste Arbeit ab: die Code-Dateien werden automatisch aus den entsprechenden <code>ui</code>- und <code>qrc</code>-Dateien generiert. Sobald man eine der Dateien im visuellen Editor bearbeitet, wird beim nächsten Build alles automatisch aktualisiert. Wie sieht es aber unter Python aus? Häufig verwendet man hier ja nicht einmal eine komplette <span class="caps">IDE</span>, für kleine Projekte zut es gut und gern auch ein einfacher Code-Editor. Ich stelle hier ein kleines Skript vor, das auch ohne <span class="caps">IDE</span> zumindest einen Teil der Arbeit übernimmt. Zwar muss man das Skript bei jeder Änderung der <code>ui</code>- und <code>qrc</code>-Dateien manuell starten, aber zumindest muss man nicht mehr alle Dateien per Hand&nbsp;umwandeln.</p>
<h1>Projektgerüst</h1>
<p>Ich setze hier voraus, dass ihr ein bestimmtes Projektgerüst verwendet. Die Ressourcendateien, <span class="caps">UI</span>-Dateien sowie Python-Code-Dateien befinden sich dabei in je einem eigenen Ordner. Da Ressourcendateien auf projektweite Dateien verweisen, befinden sie sich häufig im Hauptordner des Projekts. Ein typisches PyQt- bzw. PySide-Projekt sieht bei mir folgendermaßen&nbsp;aus:</p>
<p><img alt="Projektgerüst PyQt-Projekt" src="http://www.peterbouda.eu/tutorials/11/tut11_1.png"></p>
<p>Der <code>bin</code>-Ordner enthält das Einstiegsskript der Anwendung. Dieses lädt die Klasse des Hauptfensters aus dem Package <code>helloworld</code>, das sich im Ordner <code>src</code> befindet. Die Hauptfensterklasse wiederum lädt den <span class="caps">UI</span>-Code aus dem Unterordner <code>ui</code>, also aus dem Package <code>helloworld.ui</code>. Die Original-<span class="caps">UI</span>-Dateien liegen unter <code>ui</code>, die Ressourcendatei <code>helloworld.qrc</code> liegt im Hauptordner des Projekts. Das Ziel ist es jetzt also, möglichst unkompliziert die <span class="caps">UI</span>-Dateien aus <code>ui</code> sowie die Ressourcendatei in Python-Code umzuwandeln und in den enstsprechenden Dateien im Ordner <code>src/helloworld/ui</code> abzulegen.</p>
<h1>Das&nbsp;Skript</h1>
<p>Um diesen Schritt möglichst einfach und möglichst plattformunabhängig durchführen zu können, habe ich folgendes kleines Python-Skript geschrieben, dass diese Arbeit&nbsp;durchführt:</p>
<pre class="brush:python;">
#!/usr/bin/env python
# -*- coding: utf-8 -*-

import sys, os
from subprocess import call

if sys.platform == "win32":
    bindir = "c:/Python27/Lib/site-packages/PyQt4/bin"
else:
    bindir = "/usr/bin"

uic_path = os.path.join(bindir, "pyuic4")
#uic_path = os.path.join(bindir, "pyside-uic")
rcc_path = os.path.join(bindir, "pyrcc4")
#rcc_path = os.path.join(bindir, "pyside-rcc")

ui_path = "ui"
rc_path = ""
out_path = "src/helloworld/ui"

ui_files = { "helloworld.ui": "ui_helloworld.py" }
rc_files = { "helloworld.qrc": "helloworld_rc.py" }

for file in ui_files:
    file_path = os.path.join(ui_path, file)
    out_file_path = os.path.join(out_path, ui_files[file])
    call([uic_path, file_path, "-o", out_file_path])

for file in rc_files:
    file_path = os.path.join(rc_path, file)
    out_file_path = os.path.join(out_path, rc_files[file])
    call([rcc_path, file_path, "-o", out_file_path])
</pre>

<p>Das Skript überprüft zunächst die Plattform und setzt entsprechend den Pfad zur den <code>rcc</code>- und <code>uic</code>-Tools von PyQt oder PySide (für PySide müssen die Kommentare entfernt werden). Falls die Tools in einem anderen Verzeichnis liegen (z.B. unter <code>/usr/local/bin</code> statt <code>/usr/bin</code>) dann müsst ihr nur die Variable <code>bindir</code> entsprechend anpassen. In den beiden Variablen <code>ui_files</code> und <code>rc_files</code> listet ihr dann alle eure <span class="caps">UI</span>- und Ressourcendateien auf, und gebt als Wert jeweils den gewünschten Ausgabedateinamen an. Bei mir landen alle Dateien ausschlueßlich in <code>src/helloworld/ui</code>, aber das könnt ihr selbstverständlich an eure Bedingungen anpassen. Jedes Mal, wenn ihr die Dateien dann in eurem Projekt ändert oder Dateien hinzufügt, dann ruft ihr einfach das Skript&nbsp;auf:</p>
<pre class="brush:bash;">
python generate_ui.py
</pre>

<p>Und schon habt ihr die Code-Dateien wieder auf dem aktuellen&nbsp;Stand.</p>
<p>Mehr über dieses Thema findet ihr zum Beispiel in meinem Buch <a href="http://www.amazon.de/gp/product/3941841505/ref=as_li_tf_tl?ie=UTF8&camp=1638&creative=6742&creativeASIN=3941841505&linkCode=as2&tag=jsusde-21">PyQt und PySide. <span class="caps">GUI</span>- und Anwendungsentwicklung mit Python und Qt</a><img src="http://www.assoc-amazon.de/e/ir?t=jsusde-21&l=as2&o=3&a=3941841505" width="1" height="1" border="0" alt="book cover" style="border:none !important; margin:0px !important;" />.</p>
          <div id="comments">
			<script src="https://utteranc.es/client.js"
					repo="pbouda/peterbouda.eu"
					issue-term="pathname"
					label="Comment"
					theme="github-light"
					crossorigin="anonymous"
					async>
			</script>
          </div>
        </div>
        <!-- /.entry-content -->

        <div class="4u">
          <article class="box style2">
            <div>
              <img
                style="border-radius:50%; width:80%;"
                src="theme/images/pic00.jpg"
                alt=""
              />
            </div>
            <h3>About me</h3>
            <p>
              My name is Peter Bouda and I am a software developer with more than 20 years of
              professional experience in application development. I help
              you to bring your application to market as quickly as possible.
            </p>
            <!-- <p>
              Join our <a href="http://www.ng-lisbon.com/#trainings">next Angular training</a>
              in Lisbon, October 2-4.
            </p> -->
            <p>
              <a href="/#top">Read about my work</a><br />
              or<br />
              <a href="/#contact">Contact me</a>
            </p>
          </article>
        </div>
      </div>
      <!-- end row -->
    </div>
    <!-- end container -->
  </article>
</section>

 <!-- Contact -->
<div class="wrapper style4" id="contact">
  <article class="container 75%">
    <div class="row">
      <div class="12u">
        <h2>Send me a message and I will get back to you.</h2>
        <ul class="social">
          <li>
            <a href="mailto:hey@peterbouda.eu" class="icon fa-envelope-o"
              ><span class="label">Mail</span></a
            >
          </li>
          <li>
            <a href="https://github.com/pbouda" class="icon fa-github"
              ><span class="label">Github</span></a
            >
          </li>
        </ul>
        <br />
        <h2>RSS Feed</h2>
        <ul class="social">
          <li>
            <a href="http://www.peterbouda.eu/feeds/all.rss" class="icon fa-rss"
              ><span class="label">RSS</span></a
            >
          </li>
        </ul>
        <hr />
      </div>
    </div>

    <footer>
      <ul id="copyright">
        <li>&copy; Peter Bouda. All rights reserved.</li>
        <li>Design: <a href="http://html5up.net">HTML5 UP</a></li>
      </ul>
      <div>+351 917403181</div>
    </footer>
  </article>
</div>  </body>
</html>