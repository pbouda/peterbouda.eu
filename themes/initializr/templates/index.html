{% extends "base.html" %}
{% block content %}        

{% if articles %}
    {% for article in articles_page.object_list %}        

        {# First item #}
        {% if loop.first and not articles_page.has_previous() %}

            {% if article.iframe %}

                <h1>Latest: <a href="{{ SITEURL }}/{{ article.url }}">{{ article.title }}</a></h1>
                <article class="h-entry">
                    <div>
                        <iframe style="border: none; width:100%;" marginwidth="0" marginheight="0" scrolling="no" src="{{ article.iframe }}"></iframe>
                    </div>
                    <h2><a class="p-name u-url" href="{{ SITEURL }}/{{ article.url }}">{{ article.title }}</a></h2>
                    {% include 'article_infos.html' %}
                    {{ article.content }}
                    {% include 'comments.html' %}
                </article>

            {% elif article.image %}

                <h1>Latest: <a href="{{ SITEURL }}/{{ article.url }}">{{ article.title }}</a></h1>

                <article class="h-entry">
                    <div>
                        <img src="{{ article.image }}" {% if article.imagewidth|int >= 600 %}style="width:100%;"{% endif %} />
                    </div>
                    <h2><a class="p-name u-url" href="{{ SITEURL }}/{{ article.url }}">{{ article.title }}</a></h2>
                    {% include 'article_infos.html' %}
                    {{ article.content }}
                    {% include 'comments.html' %}
                </article>

            {% else %}
                <article class="h-entry">
                    <header>
                        <h1>Latest article</h1>
                    </header>
                    <h2><a class="p-name u-url" href="{{ SITEURL }}/{{ article.url }}">{{ article.title }}</a></h2>
                    {% include 'article_infos.html' %}{{ article.content }}{% include 'comments.html' %}
                </article>
            {% endif %}

            <aside>
                <span class="h-card">
                    <!--<h3 style="text-align:center;">About</h3>-->
                    <p style="text-align:center;"><img class="u-photo" src="/images/peter.jpg" /></p>
                    <p style="text-align:justify;">This is <a rel="me" href="http://www.peterbouda.eu" class="p-name p-url">Peter Bouda</a>'s site about <span class="p-note">software development with Qt and Python</span>. My focus is on <span class="p-note">Qt for platform-independent development of desktop, embedded and mobile applications</span> and <span class="p-note">Python for web applications (Django, Flask) and graphics programming (PyQt)</span>. There might also be some posts about the <span class="p-note">free software movement and related philosophical topics</a>.
                    </p>
                    <p><a href="/pages/profile.html">More about me...</a></p>
                    {% if SOCIAL or FEED_ALL_ATOM or FEED_ALL_RSS %}
                    <div class="social">
                        <p><a href="{{ FEED_DOMAIN }}/{{ FEED_ALL_ATOM }}" type="application/atom+xml" rel="alternate">atom feed</a></p>
                        {% if FEED_ALL_RSS %}
                        <p><a href="{{ FEED_DOMAIN }}/{{ FEED_ALL_RSS }}" type="application/rss+xml" rel="alternate">rss feed</a></p>
                        {% endif %}

                        {% for name, link in SOCIAL %}
                            <p><a rel="me" href="{{ link }}">{{ name }}</a></p>
                        {% endfor %}
                    </div><!-- /.social -->
                    {% endif %}
                </span>
            </aside>

            {% if loop.length == 1 %}
                {% include 'pagination.html' %}
            {% endif %}

            {% if loop.length > 1 %}
            <article>
                <header>
                    <h1>More posts</h1>
                </header>
            </article>
            {% endif %}

        {% else %} 

            <article>

                <h2 class="article-short"><a href="{{ SITEURL }}/{{ article.url }}" rel="bookmark" title="Permalink to {{ article.title|striptags }}">{{ article.title }}</a></h2>
                
                <div class="entry-content">
                {% include 'article_infos.html' %}
                {{ article.summary }}
                <a class="readmore" href="{{ SITEURL }}/{{ article.url }}">read more</a>
                {% include 'comments.html' %}
                </div><!-- /.entry-content -->

                <hr />

            </article>


            {% if loop.last and (articles_page.has_previous() or not articles_page.has_previous() and loop.length > 1) %}
                {% include 'pagination.html' %}
            {% endif %}

        {% endif %}
        
    {% endfor %}
{% endif %}

{% endblock %}